---
const navLinks = [
    { name: "Home", href: "/en/" },
    {
        name: "About us",
        href: "/en/about/",
        dropdown: [
            { name: "History", href: "/en/about/history" },
            {
                name: "Public records",
                href: "https://drive.google.com/drive/folders/1r7ZnV6gpdHxkjha2z8BG5Nvs3qWahIPz",
                external: true,
            },
            { name: "Roles", href: "/en/about/roles" },
            {
                name: "Teachers / volunteers",
                href: "/en/about/teachers-volunteers-overview",
            },
            { name: "Teams", href: "/en/about/teams-overview" },
            { name: "Where", href: "/en/about/where" },
            { name: "Who", href: "/en/about/who" },
        ],
    },
    {
        name: "Contact us",
        href: "/en/contact/",
        dropdown: [
            {
                name: "Anonymous feedback",
                href: "/en/contact/anonymous-feedback",
            },
            {
                name: "Report/notification",
                href: "/en/contact/report-notification",
            },
            { name: "Contact the board", href: "/en/contact/contact-board" },
            { name: "Who do I ask?", href: "/en/contact/who-to-ask" },
        ],
    },
    {
        name: "Events",
        href: "/en/events/",
        dropdown: [
            { name: "Workshops", href: "/en/workshops" },
            { name: "Shows", href: "/en/events/shows" },
            {
                name: "Festival",
                href: "https://www.facebook.com/osloimprofestival",
                external: true,
            },
        ],
    },
    {
        name: "Join us",
        href: "/en/join/",
        dropdown: [
            {
                name: "Membership",
                href: "https://docs.google.com/forms/d/e/1FAIpQLSdV5bdctjwA--rFLd-crQBrDNQD0y7E_1qlRrGbPpddraonZw/viewform",
                external: true,
            },
            {
                name: "New improv team (mixer)",
                href: "/en/join/joinimprovteam",
            },
        ],
    },
    {
        name: "Policies",
        href: "/en/policies/",
        dropdown: [
            { name: "Code of conduct", href: "/en/policies/codeofconduct" },
            { name: "Privacy policy", href: "/en/policies/privacypolicy" },
            { name: "Terms of sale", href: "/en/policies/termsofsale" },
        ],
    },
    {
        name: "Resources for volunteers",
        href: "/en/resources/",
        dropdown: [
            { name: "Show manual", href: "/en/resources/showhowtodo" },
            { name: "Workshop manual", href: "/en/resources/workshophowtodo" },
        ],
    },
    {
        name: "Social media",
        href: "#",
        dropdown: [
            {
                name: "Facebook",
                href: "https://www.facebook.com/groups/improneufcommunity",
                external: true,
            },
            {
                name: "Instagram",
                href: "https://www.instagram.com/improneuflovesyou/",
                external: true,
            },
        ],
    },
];
---

<header class="header">
    <div class="container nav-container">
        <div class="logo">
            <a href="/en/">IMPRO NEUF</a>
        </div>
        <nav class="nav">
            <ul class="nav-list">
                {
                    navLinks.map((link) => (
                        <li class="nav-item">
                            <a
                                href={link.href}
                                class="nav-link"
                                {...(link.external
                                    ? {
                                          target: "_blank",
                                          rel: "noopener noreferrer",
                                      }
                                    : {})}
                            >
                                {link.name}
                                {link.dropdown && <span class="arrow">▼</span>}
                            </a>
                            {link.dropdown && (
                                <ul class="dropdown">
                                    {link.dropdown.map((sub) => (
                                        <li>
                                            <a
                                                href={sub.href}
                                                {...(sub.external
                                                    ? {
                                                          target: "_blank",
                                                          rel: "noopener noreferrer",
                                                      }
                                                    : {})}
                                            >
                                                {sub.name}
                                                {sub.external && (
                                                    <span class="external-icon">
                                                        ↗
                                                    </span>
                                                )}
                                            </a>
                                        </li>
                                    ))}
                                </ul>
                            )}
                        </li>
                    ))
                }
                <li class="nav-item">
                    <a href="/no/" class="nav-link lang-switcher">Norsk</a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<style>
    .header {
        position: sticky;
        top: 0;
        background: var(--color-white);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        padding: 1rem 0;
    }

    .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .logo a {
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: 1px;
    }

    .nav-list {
        display: flex;
        gap: 1.5rem;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        font-weight: 600;
        padding: 0.5rem 0;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .arrow {
        font-size: 0.6rem;
    }

    .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background: var(--color-white);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border-radius: 4px;
        min-width: 15rem;
        display: none;
        flex-direction: column;
        padding: 0.5rem 0;
    }

    .nav-item:hover .dropdown {
        display: flex;
    }

    .dropdown li a {
        display: block;
        padding: 0.5rem 1rem;
        transition: background 0.2s;
    }

    .dropdown li a:hover {
        background: var(--color-gray-light);
    }

    .lang-switcher {
        border: 1px solid var(--color-black);
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
    }
</style>
